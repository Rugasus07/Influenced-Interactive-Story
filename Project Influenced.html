<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Influenced</title>
</head>
<body>


    <div id="intro">
        <h1>Influenced: The Cursed Promise</h1>
    </div>

    <div id="story">

    </div>

    <div id="buttons">

    </div>

    <script>
    let storyContainer = document.getElementById('story');
    
    let buttonContainer = document.getElementById ('buttons');

    let history = ["intro"];

    let aggressivePoints = 0

    let heroicPoints = 0

    let cowardPoints = 0

    
        
    const story = {
        intro : {
            text : `This is sample text for the first part of the story.`,
            decisions : [
                ["Example 1", "test", 5, 0, 0]
            ]
        },
        test : {
            text : `WENDY'S DISCLAIMS ALL LIABILITY WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), STRICT LIABILITY OR OTHERWISE, AND DOES NOT ACCEPT ANY LIABILITY FOR ANY LOSS OR DAMAGE (DIRECT, INDIRECT, PUNITIVE, ACTUAL, CONSEQUENTIAL, INCIDENTAL, SPECIAL, EXEMPLARY OR OTHERWISE) RESULTING FROM ANY USE OF, OR INABILITY TO USE, THE SITE OR ANY OTHER WEBSITE, OR THE MATERIAL, INFORMATION, SOFTWARE, FACILITIES, SERVICES OR OTHER CONTENT ON THE SITE OR ANY OTHER WEBSITE, REGARDLESS OF THE BASIS UPON WHICH LIABILITY IS CLAIMED AND EVEN IF ANY MEMBER OF THE WENDY'S GROUP HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH LOSS OR DAMAGE.`,
            decisions : [
                ["Example 1", "", 0, 5, 0]
            ]
        }
    }
    
    function createButton(buttonText, choice, agr, hero, cow){
        let button = document.createElement ('button');
        
        button.innerHTML = buttonText;

        buttonContainer.appendChild(button)

        button.addEventListener ('click', function() {
            history.push (choice);
            aggressivePoints = aggressivePoints += agr;
            heroicPoints = heroicPoints += hero;
            cowardPoints = cowardPoints += cow;
            console.log(`Coward: ${cowardPoints}, Hero: ${heroicPoints}, Aggro: ${aggressivePoints}`)
            showStory();
            })
    }

    function buildStory(text) {
            let storyItem = document.createElement("p");
            storyItem.innerText = text;
            storyContainer.appendChild(storyItem);
        }


    function showStory(){
        let currentPage = history[history.length - 1];

        storyContainer.innerHTML = "";
        buttonContainer.innerHTML = "";

        for(let page of history){
            buildStory(story[page].text);
        }

        for(let choice of story[currentPage].decisions){
            createButton(choice[0], choice[1], choice[2], choice[3], choice[4])
        }
    }
    
    showStory();
    </script>


    
</body>
</html>