<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Influenced</title>
</head>
<body>


    <div id="intro">
        <h1>Influenced</h1>
    </div>

    <div id="story">

    </div>

    <div id="buttons">

    </div>

    <script>
    let storyContainer = document.getElementById('story');
    
    let buttonContainer = document.getElementById ('buttons');

    let history = ["intro"];

    let aggressivePoints = 0

    let heroicPoints = 0

    let cowardPoints = 0

    
        
    const story = {
        intro : {
            text : "Offer available at participating U.S. Wendy’s for a limited time. Mobile purchase required. Offer must be redeemed via Wendy’s app or online order. Account registration required. © 2019 The Coca-Cola Company",
            choices : [
                ["Example 1", "test", 999, 0, 0]
            ]
        },
        test : {
            text : "Offer available at participating U.S. Wendy’s for a limited time. Mobile purchase required. Offer must be redeemed via Wendy’s app or online order. Account registration required. © 2019 The Coca-Cola Company",
            choices : [
                ["Example 1", "test", 999, 0, 0]
            ]
        }
    }
    
    function createButton(buttonText, choice, agr, hero, cow){
        let button = document.createElement ('button');
        
        button.innerHTML = buttonText;

        buttonContainer.appendChild(button)

        button.addEventListener ('click', function() {
            history.push (choice);
            aggressivePoints = aggressivePoints += agr;
            heroicPoints = heroicPoints += hero;
            cowardPoints = cowardPoints += cow;
            console.log(`Coward: ${cowardPoints}, Hero: ${heroicPoints}, Aggro: ${aggressivePoints}`)
            showStory();
            })
    }

    function buildStory(text) {
            let storyItem = document.createElement("p");
            storyItem.innerText = text;
            storyContainer.appendChild(storyItem);
        }


    function showStory(){
        let currentPage = history[history.length - 1];

        storyContainer.innerHTML = "";
        buttonContainer.innerHTML = "";

        for(let page of history){
            buildStory(story[page].text);
        }

        for(let choice of story[currentPage].choices){
            createButton(choice[0], choice[1], choice[2], choice[3], choice[4])
        }
    }
    
    showStory();
    </script>



    
</body>
</html>